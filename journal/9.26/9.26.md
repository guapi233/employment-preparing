## 学习内容

- 大前端课程：阶段三 —— 第 9 周 —— 2-8 



## NoSQL

- 易扩展、高性能、高可用
- 较容易映射复杂数据
- 无事物特性要求



### NoSQL常见场景

**内嵌**

指存在关联关系的文档，放在同一文当中，以数组的形式存放。

```
{
	roles: ["admin", "user"]  // 内嵌
}
```



**父引用**

指存在**一**对**多**的情况下，放在同一文档中，以数组的形式存放。

```
{
	commentID: ["commentID1", "commentID2"]
}
```



**子引用**

指存在**一**对**非常多**的情况中，由于数据库存放限制，这个时候进行反向引用。

```
{
	cid: "commentID1",
	// ...其他内容
}
```



**反范式**

不走寻常路，上面的就是范式。

- 是否有提升性能的区间
- 数据量的变化是否非常庞大，庞大到更新会异常低效
- 先考虑读写比，才考虑反范式。





## 鉴权

### Session / Cookie

**优点**

- 较易扩展
- 简单

**缺点**

- 安全性低
- 性能低 / 服务端存储
- 多服务器同步session困难
- 跨平台困难



### JWT

**优点**

- 易拓展
- 支持移动设备
- 跨应用调用
- 安全
- 承载信息丰富



**缺点**

- 刷信与过期处理
- Payload不易过大
- 中间人攻击



### Oauth

**优点**

- 开放
- 安全
- 简单
- 权限指定



**缺点**

- 需要增加授权服务器
- 增加网络请求



### JWT 工作原理

- 登录
- 验证通过，服务器返回Token
- Header带Token请求
- 验证通过，返回Data

 